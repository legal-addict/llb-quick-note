<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LLB Curriculum Overview</title>
  <link rel="stylesheet" href="legal addict.css">
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>
  <header>
    <h1>UNIVERSITY OF MUMBAI SYLLABUS (WITH QUICK NOTES)</h1>
  </header>

  <p class="b">
    Quick notes for BLS LL.B. (1year) sem 3
  </p>

  <!-- Buttons for notes -->
  <button onclick="buyNote('Sociology Quick Notes', 99, 'sociology.html')" id="btn-sociology">Sociology</button><br>
  <button onclick="buyNote('Political Science-II Notes', 129, 'political-science.html')" id="btn-political">Political Science-II - Foundations of Political Obligation</button><br>
  <button onclick="buyNote('History of Courts Notes', 79, 'history.html')" id="btn-history">History of Courts</button><br>

  <script>
    async function buyNote(noteName, amount, fileName) {
      try {
        // 1️⃣ Call backend to create order
        const response = await fetch('http://localhost:5000/create-order', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ amount: amount * 100 }) // convert to paise
        });

        const orderData = await response.json();

        // 2️⃣ Initialize Razorpay checkout
        var options = {
          key: orderData.key,           // Key ID from backend
          amount: orderData.amount,
          currency: orderData.currency,
          name: "LEGAL ADDICT",
          description: noteName,
          order_id: orderData.id,       // Must use the order ID from backend
          handler: function (response) {
            // Redirect to file after successful payment
            window.location.href = fileName;
          },
          theme: {
            color: "#2c7be5"
          }
        };

        var rzp = new Razorpay(options);
        rzp.open();

      } catch (err) {
        console.error(err);
        alert("Payment failed! Check console for details.");
      }
    }
  </script>
</body>
</html>
